<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
                    
        <head><meta content="application/xhtml+xml; charset=utf-8" http-equiv="Content-Type"/>
            <meta content="application/xhtml+xml; charset=utf-8" name="content-type"/>
            <meta content="&#10;        &#10;    Bits and Bytes, Mathematics and Money" name="title"/>
            <meta content="Christian Ullenboom" name="author"/>
            <meta content="Rheinwerk Publishing" name="publisher"/>
            <meta content="© 2023 by Rheinwerk Publishing Inc., Boston (MA)" name="copyright"/>
            <meta content="Java - The Comprehensive Guide - &#10;        &#10;    Bits and Bytes, Mathematics and Money" name="description"/>
            <meta content="en" name="language"/>
            <title>
        
    Bits and Bytes, Mathematics and Money</title>
            <link href="common/main.css" rel="stylesheet" type="text/css"/>
<meta content="urn:uuid:e0000000-0000-0000-0000-000030211834" name="Adept.expected.resource"/>
        </head>
    


                    <body class="office_us type_">
                        <div id="main">
        
        <h2 class="t2" id="h21.2">21.2    Floating Point Arithmetic in Java</h2>
        
        <p class="standard">Numbers with periods are called 
            <span class="italic">floating points</span>
            <a class="indexanchor" id="i21_28"/>, 
            <span class="italic">floats</span>,
            <a class="indexanchor" id="i21_29"/> or 
            <span class="italic">fractions</span> (fraction numbers)
            <a class="indexanchor" id="i21_30"/>. The term “float” originates from the fact that sliding (shifting) the decimal point
            <a class="indexanchor" id="i21_31"/> represents a change in the number defined as a product of a digit and a power of 10. Let’s consider the speed of light at 299,792.458 kilometers per second as an example: 299.792,458 = 29.979,2458 × 10
            <sup>1</sup> = 2.997,92458 × 10
            <sup>2</sup> = 299,792458 × 10
            <sup>3</sup> = 29,9792458 × 10
            <sup>4</sup> = 2,99792458 × 10
            <sup>5</sup>
        .</p>
        
        <p class="standard">For floats, Java supports the types 
            <samp class="listingcharacter listingcharacter">float</samp>
            <a class="indexanchor" id="i21_32"/> and 
            <samp class="listingcharacter listingcharacter">double</samp>
            <a class="indexanchor" id="i21_33"/>, which follow the 
            <span class="italic">Institute of Electrical and Electronics Engineers (IEEE)</span> 754 specification
            <a class="indexanchor" id="i21_34"/>. This standard has been in existence since the mid-1980s. A 
            <samp class="listingcharacter listingcharacter">float</samp> has a length of 32 bits, while a 
            <samp class="listingcharacter listingcharacter">double</samp> has a length of 64 bits. Related 
            <span class="italic">arithmetic</span> operations are defined in the 
            <span class="italic">IEEE Standard for Floating-Point Arithmetic</span>
            <a class="indexanchor" id="i21_35"/>
        .</p>
        
        <div class="box box_standard">
            
            <h6 class="boxheading"><span class="box_icon">[»]  </span>
                <a id="p1026"/>
            Note</h6>
            
            <p class="standard first">Be aware that the accuracy of 
                <samp class="listingcharacter listingcharacter">float</samp>
             is actually not that great. Inaccuracy can quickly grow, as shown in the following example:</p>
            
            <div class="listing  last_item" id="l_none_21232"><pre>System<span class="">.</span><span class="">out</span><span class="">.</span><span class="">println</span><span class="">(</span><span class=""> </span><span class="">234567</span>
                <span class="bold">8.88f</span><span class=""> );  </span><span class=""> //  234567</span>
                <span class="bold">9.0<span class=""/></span><span class=""/> </pre></div>
        
        </div>
        
        
            
            <h3 class="t3" id="h21.2.1">21.2.1    Special Values for Infinity, Zero, and Not a Number</h3>
            
            <p class="standard">The 
                <samp class="listingcharacter listingcharacter">double</samp> and 
                <samp class="listingcharacter listingcharacter">float</samp>
             data types can store not only “standard numbers,” but they can also accept a positive or negative zero. Furthermore, Java defines special values for the following numbers:</p>
            
            <ul>
                
                <li>
                    
                    <p class="standard first-item last-item">Both positive and negative infinity
                        <a class="indexanchor" id="i21_36"/>
                     </p>
                
                </li>
                
                <li>
                    
                    <p class="standard first-item last-item">Not a number (NaN)
                        <a class="indexanchor" id="i21_37"/>
                        <a class="indexanchor" id="i21_38"/>
                    </p>
                
                </li>
            
            </ul>
            
            
                
                <h4 class="t4" id="h21.2.1.1">Positive and Negative Zeros</h4>
                
                <p class="standard">A positive zero (+0.0) and a negative zero (–0.0) appear with an underflow (the result of a calculation is too small to be represented).</p>
                
                <div class="box box_standard">
                    
                    <h6 class="boxheading"><span class="box_icon">[eg]  </span>Example</h6>
                    
                    <p class="standard first">The following example generates underflows:</p>
                    
                    <div class="listing  last_item" id="l_none_21263"><pre>System<span class="">.</span><span class="">out</span><span class="">.</span><span class="">println</span><span class="">(</span><span class=""> 1E</span><span class="">-</span><span class="">322</span><span class=""> </span><span class="">*</span><span class="">  </span><span class="">0.0001</span><span class=""> </span><span class="">);</span><span class=""> </span><span class=""> //  0.0</span><span class=""><br/></span>System<span class="">.</span><span class="">out</span><span class="">.</span><span class="">println</span><span class="">(</span><span class=""> 1E</span><span class="">-</span><span class="">322</span><span class=""> </span><span class="">*</span><span class=""> </span><span class="">-</span><span class="">0.0001</span><span class=""> </span><span class="">);</span><span class=""> </span><span class=""> // -0.0</span><span class=""> </span></pre></div>
                
                </div>
                
                <p class="standard">With the comparison operator 
                    <samp class="listingcharacter listingcharacter">==</samp>, positive zero is equal to negative zero, so 
                    <samp class="listingcharacter listingcharacter">0.0 ==</samp> -
                    <samp class="listingcharacter listingcharacter">0.0</samp> returns the result 
                    <samp class="listingcharacter listingcharacter">true</samp>. As a result, 
                    <samp class="listingcharacter listingcharacter">0.0 &gt; -0.0</samp> is also wrong. However, the bit mask is distinguishable, as shown by the comparison 
                    <samp class="listingcharacter listingcharacter">Double.doubleToLongBits(0.0) != Double.doubleToLongBits (-0.0)</samp>
                .</p>
                
                <p class="standard">Another small difference is evident when calculating 
                    <samp class="listingcharacter listingcharacter">1.0 /</samp> -
                    <samp class="listingcharacter listingcharacter">0.0</samp> and 
                    <samp class="listingcharacter listingcharacter">1.0 / 0.0</samp>
                . Due to the limit value, the result goes towards negative infinity and towards positive infinity, respectively.</p>
            
            
            
            
                
                <h4 class="t4" id="h21.2.1.2">Infinity</h4>
                
                <p class="standard">The overflow of a mathematical operation results in a positive or negative infinity.</p>
                
                <div class="box box_standard">
                    
                    <h6 class="boxheading"><span class="box_icon">[eg]  </span>Example</h6>
                    
                    <p class="standard first">The following examples multiple two really large values and divide some values by zero:</p>
                    
                    <div class="listing  last_item" id="l_none_21261"><pre>
                        <a id="p1027"/>System<span class="">.</span><span class="">out</span><span class="">.</span><span class="">println</span><span class="">(</span><span class="">  1E300 </span><span class="">*</span><span class=""> 1E20 </span><span class="">);</span><span class="">   </span><span class=""> //  Infinity</span><span class=""><br/></span>System<span class="">.</span><span class="">out</span><span class="">.</span><span class="">println</span><span class="">(</span><span class=""> </span><span class="">-</span><span class="">1E300 </span><span class="">*</span><span class=""> 1E20 </span><span class="">);</span><span class="">   </span><span class=""> // -Infinity</span><span class=""><br/></span>System<span class="">.</span><span class="">out</span><span class="">.</span><span class="">println</span><span class="">(</span><span class=""> </span><span class="">1</span><span class="">.</span><span class=""> /  0. );        </span><span class=""> //  Infinity</span><span class=""><br/></span>System.out.println( 1. / -0. );        <span class=""> // -Infinity</span><span class=""/></pre></div>
                
                </div>
                
                <p class="standard">For these values, the Java library declares two constants in 
                    <samp class="listingcharacter listingcharacter">Double</samp> and 
                    <samp class="listingcharacter listingcharacter">Float</samp>
                . Together with the largest and smallest representable floats, these values can be represented by the following constants:</p>
                
                <table class="standardtable" id="t21.8">
                    
                    <thead>
                        
                        <tr>
                            
                            <th class="tablehead tablecell_first top_border_cell">
                                
                                <p class="standard first-item last-item">Value for</p>
                            
                            </th>
                            
                            <th class="tablehead tablecell_middle top_border_cell">
                                
                                <p class="standard first-item last-item">Float</p>
                            
                            </th>
                            
                            <th class="tablehead tablecell_last top_border_cell">
                                
                                <p class="standard first-item last-item">Double</p>
                            
                            </th>
                        
                        </tr>
                    
                    </thead>
                    
                    <tbody>
                        
                        <tr>
                            
                            <td class="tablecell tablecell_first top_border_cell">
                                
                                <p class="standard first-item last-item">Positive infinity</p>
                            
                            </td>
                            
                            <td class="tablecell tablecell_middle top_border_cell">
                                
                                <p class="standard first-item last-item">
                                    <samp class="listingcharacter listingcharacter">Float.POSITIVE_INFINITY</samp>
                                </p>
                            
                            </td>
                            
                            <td class="tablecell tablecell_last top_border_cell">
                                
                                <p class="standard first-item last-item">
                                    <samp class="listingcharacter listingcharacter">Double.POSITIVE_INFINITY</samp>
                                </p>
                            
                            </td>
                        
                        </tr>
                        
                        <tr class="light">
                            
                            <td class="tablecell tablecell_first">
                                
                                <p class="standard first-item last-item">Negative infinity</p>
                            
                            </td>
                            
                            <td class="tablecell tablecell_middle">
                                
                                <p class="standard first-item last-item">
                                    <samp class="listingcharacter listingcharacter">Float.NEGATIVE_INFINITY</samp>
                                </p>
                            
                            </td>
                            
                            <td class="tablecell tablecell_last">
                                
                                <p class="standard first-item last-item">
                                    <samp class="listingcharacter listingcharacter">Double.NEGATIVE_INFINITY</samp>
                                </p>
                            
                            </td>
                        
                        </tr>
                        
                        <tr>
                            
                            <td class="tablecell tablecell_first">
                                
                                <p class="standard first-item last-item">Smallest value</p>
                            
                            </td>
                            
                            <td class="tablecell tablecell_middle">
                                
                                <p class="standard first-item last-item">
                                    <samp class="listingcharacter listingcharacter">Float.MIN_VALUE</samp>
                                </p>
                            
                            </td>
                            
                            <td class="tablecell tablecell_last">
                                
                                <p class="standard first-item last-item">
                                    <samp class="listingcharacter listingcharacter">Double.MIN_VALUE</samp>
                                </p>
                            
                            </td>
                        
                        </tr>
                        
                        <tr class="light">
                            
                            <td class="tablecell tablecell_first">
                                
                                <p class="standard first-item last-item">Greatest value</p>
                            
                            </td>
                            
                            <td class="tablecell tablecell_middle">
                                
                                <p class="standard first-item last-item">
                                    <samp class="listingcharacter listingcharacter">Float.MAX_VALUE</samp>
                                </p>
                            
                            </td>
                            
                            <td class="tablecell tablecell_last">
                                
                                <p class="standard first-item last-item">
                                    <samp class="listingcharacter listingcharacter">Double.MAX_VALUE</samp>
                                </p>
                            
                            </td>
                        
                        </tr>
                    
                    </tbody>
                
                </table>
                
                <p class="caption "><b>Table 21.8</b>    
            Special Values and Their Constants</p>
                
                <p class="standard">The minimum for 
                    <samp class="listingcharacter listingcharacter">double</samp> values is about 10
                    <sup>–324</sup>, and the maximum is about 10
                    <sup>308</sup>. In addition, 
                    <samp class="listingcharacter listingcharacter">Double</samp> and 
                    <samp class="listingcharacter listingcharacter">Float</samp> declare constants for 
                    <samp class="listingcharacter listingcharacter">MAX_EXPONENT/MIN_EXPONENT</samp>
                .</p>
                
                <div class="box box_standard">
                    
                    <h6 class="boxheading"><span class="box_icon">[»]  </span>Note</h6>
                    
                    <p class="standard first last">The display of overflow/underflow and of undefined results is only available for floats, not for integers.</p>
                
                </div>
                
                <div class="listing " id="l_none_21279"><pre><span class="">public</span><span class=""> </span><span class="">final</span><span class=""> </span><span class="">class</span><span class=""> java</span><span class="">.</span><span class="">lang</span><span class="">.</span>
                    <span class="bold">Float</span>|
                    <span class="bold">Double</span><br/><span class="">extends</span><span class=""> Number</span><br/><span class="">implements</span><span class=""> Comparable&lt;Float|Double&gt; </span><span class=""/></pre></div>
                
                <ul>
                    
                    <li>
                        
                        <p class="standard first-item last-item">
                            <samp class="listingcharacter listingcharacter">static boolean isInfinite(float|double v)</samp><br/>Returns 
                            <samp class="listingcharacter listingcharacter">true</samp> if 
                            <samp class="listingcharacter listingcharacter">v</samp> is either 
                            <samp class="listingcharacter listingcharacter">POSITIVE_INFINITY</samp> or 
                            <samp class="listingcharacter listingcharacter">NEGATIVE_INFINITY</samp>
                        .</p>
                    
                    </li>
                    
                    <li>
                        
                        <p class="standard first-item last-item">
                            <samp class="listingcharacter listingcharacter">static boolean isFinite(float|double d)</samp><br/>Returns 
                            <samp class="listingcharacter listingcharacter">true</samp> if 
                            <samp class="listingcharacter listingcharacter">d</samp>
                         is a finite number.</p>
                    
                    </li>
                
                </ul>
            
            
            
            
                
                <h4 class="t4" id="h21.2.1.3">The Number That’s Not a Number</h4>
                
                <p class="standard">NaN is often an error indicator for the result of undefined arithmetic operations, such as 0/0.</p>
                
                <div class="box box_standard">
                    
                    <h6 class="boxheading"><span class="box_icon">[eg]  </span>
                        <a id="p1028"/>
                    Example</h6>
                    
                    <p class="standard first">The following examples result in NaN when calculating the root of a negative number and performing a division by zero:</p>
                    
                    <div class="listing  last_item" id="l_none_21288"><pre>System<span class="">.</span><span class="">out</span><span class="">.</span><span class="">println</span><span class="">(</span><span class=""> Math</span><span class="">.</span><span class="">sqrt</span><span class="">(-</span><span class="">4</span><span class="">)</span><span class=""> </span><span class="">);</span><span class="">    </span><span class=""> // NaN</span><span class=""><br/></span>System<span class="">.</span><span class="">out</span><span class="">.</span><span class="">println</span><span class="">(</span><span class=""> </span><span class="">0.0</span><span class=""> / 0.0);         </span><span class=""> // NaN</span><span class=""/> </pre></div>
                
                </div>
                
                <p class="standard">
                    <samp class="listingcharacter listingcharacter">NaN</samp> is declared as a constant in the 
                    <samp class="listingcharacter listingcharacter">Float</samp>/
                    <samp class="listingcharacter listingcharacter">Double</samp> classes. The static method 
                    <samp class="listingcharacter listingcharacter">isNaN(...)</samp>
                    <a class="indexanchor" id="i21_39"/>
                 tests whether a number is NaN.</p>
                
                <div class="listing " id="l_none_21300"><pre><span class="">public</span><span class=""> </span><span class="">final</span><span class=""> </span><span class="">class</span><span class=""> java</span><span class="">.</span><span class="">lang</span><span class="">.</span>
                    <span class="bold">Float</span>|
                    <span class="bold">Double</span><br/><span class="">extends</span><span class=""> Number</span><br/><span class="">implements</span><span class=""> Comparable&lt;Float|Double&gt; </span><span class=""/></pre></div>
                
                <ul>
                    
                    <li>
                        
                        <p class="standard first-item last-item">
                            <samp class="listingcharacter listingcharacter">static final float|double NaN = 0.0 / 0.0;</samp><br/>Declaration of NaN for 
                            <samp class="listingcharacter listingcharacter">Double</samp> and 
                            <samp class="listingcharacter listingcharacter">Float</samp>
                        </p>
                    
                    </li>
                    
                    <li>
                        
                        <p class="standard first-item last-item">
                            <samp class="listingcharacter listingcharacter">static boolean isNaN(float|double v)</samp><br/>Returns 
                            <samp class="listingcharacter listingcharacter">true</samp> if the passed number is 
                            <samp class="listingcharacter listingcharacter">v</samp>
                         NaN.</p>
                    
                    </li>
                    
                    <li>
                        
                        <p class="standard first-item last-item">
                            <samp class="listingcharacter listingcharacter">boolean isNaN()</samp><br/>Returns 
                            <samp class="listingcharacter listingcharacter">true</samp> if the current 
                            <samp class="listingcharacter listingcharacter">Float</samp>|
                            <samp class="listingcharacter listingcharacter">Double</samp>
                         object is NaN.</p>
                    
                    </li>
                
                </ul>
                
                <p class="standard">The implementation of 
                    <samp class="listingcharacter listingcharacter">isNan(float|double v)</samp> is simple: 
                    <samp class="listingcharacter listingcharacter">return v != v</samp>
                .</p>
            
            
            
            
                
                <h4 class="t4" id="h21.2.1.4">Everything in Order*</h4>
                
                <p class="standard">Except for the value NaN, a total order is defined on all floats; that is, they can be enumerated from the smallest number to the largest. At the edge is negative infinity, followed by negative numbers, negative zero, positive zero, positive numbers, and positive infinity. The only thing remaining is the single unsorted number, 
                    <samp class="listingcharacter listingcharacter">NaN</samp>. All numerical comparisons, such as 
                    <samp class="listingcharacter listingcharacter">&lt;</samp>, 
                    <samp class="listingcharacter listingcharacter">&lt;=</samp>, 
                    <samp class="listingcharacter listingcharacter">&gt;</samp>, and 
                    <samp class="listingcharacter listingcharacter">&gt;=</samp> return 
                    <samp class="listingcharacter listingcharacter">false </samp>with 
                    <samp class="listingcharacter listingcharacter">NaN</samp>. A comparison with 
                    <samp class="listingcharacter listingcharacter">==</samp> is 
                    <samp class="listingcharacter listingcharacter">false</samp> if one of the operands is 
                    <samp class="listingcharacter listingcharacter">NaN</samp>. 
                    <samp class="listingcharacter listingcharacter">!=</samp> behaves the other way round; 
                    <samp class="listingcharacter listingcharacter">true</samp> is returned if one of the operands is 
                    <samp class="listingcharacter listingcharacter">NaN</samp>
                .</p>
                
                <div class="box box_standard">
                    
                    <h6 class="boxheading"><span class="box_icon">[eg]  </span>Example</h6>
                    
                    <p class="standard first">The following example puts NaN through some equality tests:</p>
                    
                    <div class="listing " id="l_none_21313"><pre>System<span class="">.</span><span class="">out</span><span class="">.</span><span class="">println</span><span class="">(</span><span class=""> Double</span><span class="">.</span><span class="">NaN </span><span class="">==</span><span class=""> Double</span><span class="">.</span><span class="">NaN </span><span class="">);</span><span class="">    </span><span class=""> // false</span><span class=""><br/></span>System<span class="">.</span><span class="">out</span><span class="">.</span><span class="">println</span><span class="">(</span><span class=""> Double</span><span class="">.</span><span class="">NaN </span><span class="">!=</span><span class=""> Double</span><span class="">.</span><span class="">NaN </span><span class="">);</span><span class="">    </span><span class=""> // true</span><span class=""/> </pre></div>
                    
                    <p class="standard">Since NaN isn’t equal to itself, the following construction, which is usually an infinite loop, is simply skipped with 
                        <samp class="listingcharacter listingcharacter">d</samp> as 
                        <samp class="listingcharacter listingcharacter">Double.NaN</samp>
                    :</p>
                    
                    <div class="listing  last_item" id="l_none_21323"><pre><span class="">while</span><span class=""> </span><span class="">(</span><span class=""> d </span><span class="">==</span><span class=""> d </span><span class="">)</span><span class=""> </span><span class="">{</span><span class=""> /* Never executed */</span><span class=""> }</span> </pre></div>
                
                </div>
                
                <p class="standard">
                    <a id="p1029"/>A NaN value adjusted to an integer, such as 
                    <samp class="listingcharacter listingcharacter">(int) Double.NaN</samp>, results in 0, and no exception is thrown.
                    <span class="footnote_anchor"><a href="footnotes.html#ftn-fn21_03" id="fn21_03">[ 230 ]</a></span>
                </p>
            
            
            
            
                
                <h4 class="t4" id="h21.2.1.5">Quiet NaNs*</h4>
                
                <p class="standard">A problem in floating point arithmetic is that no exceptions indicate errors. NaNs of this kind are also called 
                    <span class="italic">quiet NaNs</span>
                    <a class="indexanchor" id="i21_40"/>
                    <a class="indexanchor" id="i21_41"/> (
                    <span class="italic">qNaNs</span>). Thus, as a developer, you must always determine yourself if the result is correct during a calculation. An average numerical processor distinguishes between a qNaN and a 
                    <span class="italic">signaling NaN</span>
                    <a class="indexanchor" id="i21_42"/>
                    <a class="indexanchor" id="i21_43"/> (
                    <span class="italic">sNaN</span>
                    <a class="indexanchor" id="i21_44"/>
                ).</p>
            
            
        
        
        
        
            
            <h3 class="t3" id="h21.2.2">21.2.2    Standard Notation and Scientific Notation for Floats*</h3>
            
            <p class="standard">Two notations exist for representing floating point literals: standard and scientific. The 
                <span class="italic">scientific notation</span>
                <a class="indexanchor" id="i21_45"/>
                <a class="indexanchor" id="i21_46"/> is an extension of the standard notation. In scientific notation, the decimal places are followed by an 
                <samp class="listingcharacter listingcharacter">E</samp> (or 
                <samp class="listingcharacter listingcharacter">e</samp>) with an exponent to the base 10. The part before the separator may be introduced by a 
                <samp class="listingcharacter listingcharacter">+</samp> or 
                <samp class="listingcharacter listingcharacter">-</samp> sign. Also, the exponent can be positive or negative
                <span class="footnote_anchor"><a href="footnotes.html#ftn-fn21_04" id="fn21_04">[ 231 ]</a></span> but must be an integer. 
                <span class="crossreference "><a href="21_002.html#t21.9">Table 21.9</a></span>
             contains three examples.</p>
            
            <table class="standardtable" id="t21.9">
                
                <thead>
                    
                    <tr>
                        
                        <th class="tablehead tablecell_first top_border_cell">
                            
                            <p class="standard first-item last-item">Standard</p>
                        
                        </th>
                        
                        <th class="tablehead tablecell_last top_border_cell">
                            
                            <p class="standard first-item last-item">Scientific</p>
                        
                        </th>
                    
                    </tr>
                
                </thead>
                
                <tbody>
                    
                    <tr>
                        
                        <td class="tablecell tablecell_first top_border_cell">
                            
                            <p class="standard first-item last-item">123450.0</p>
                        
                        </td>
                        
                        <td class="tablecell tablecell_last top_border_cell">
                            
                            <p class="standard first-item last-item">1.2345E5</p>
                        
                        </td>
                    
                    </tr>
                    
                    <tr class="light">
                        
                        <td class="tablecell tablecell_first">
                            
                            <p class="standard first-item last-item">123450.0</p>
                        
                        </td>
                        
                        <td class="tablecell tablecell_last">
                            
                            <p class="standard first-item last-item">1.2345E+5</p>
                        
                        </td>
                    
                    </tr>
                    
                    <tr>
                        
                        <td class="tablecell tablecell_first">
                            
                            <p class="standard first-item last-item">0.000012345</p>
                        
                        </td>
                        
                        <td class="tablecell tablecell_last">
                            
                            <p class="standard first-item last-item">1.2345E–5</p>
                        
                        </td>
                    
                    </tr>
                
                </tbody>
            
            </table>
            
            <p class="caption "><b>Table 21.9</b>    
            Notations of Floats</p>
            
            <div class="box box_standard">
                
                <h6 class="boxheading"><span class="box_icon">[eg]  </span>Example</h6>
                
                <p class="standard first">Scientific notation is used in the following examples:</p>
                
                <div class="listing  last_item" id="l_none_21330"><pre><span class="">double</span><span class=""> x </span><span class="">=</span><span class=""> </span><span class="">3.00e+8</span><span class="">;</span><span class=""><br/></span><span class="">float</span><span class="">  y </span><span class="">=</span><span class=""> </span><span class="">3</span><span class="">.</span><span class="">00E</span><span class="">+</span><span class="">8F;</span></pre></div>
            
            </div>
        
        
        
        
            
            <h3 class="t3" id="h21.2.3">21.2.3    Mantissas and Exponents*</h3>
            
            <p class="standard">Internally, floats consist of three parts: a sign, an integer 
                <span class="italic">exponent</span>,
                <a class="indexanchor" id="i21_47"/> and a 
                <span class="italic">mantissa</span>
                <a class="indexanchor" id="i21_48"/>
            . While the mantissa determines accuracy, the exponent indicates the magnitude of the number.</p>
            
            <p class="standard">
                <a id="p1030"/>The calculation for floats from the three elements looks basically as follows: 
                <span class="italic">Sign</span> × 
                <span class="italic">Mantissa</span> × 2 ^ 
                <span class="italic">Exponent</span>, where the 
                <span class="italic">sign</span> can be –1 or +1. The mantissa 
                <span class="italic">m</span> is not a number with an arbitrary value range but is 
                <span class="italic">normalized</span>, which
                <span class="italic"> </span>means the value is in the range of 1 ⩽ 
                <span class="italic">m</span> &lt; 2. Therefore, a float that starts with 1 is therefore also called 
                <span class="italic">1-plus-form</span>.
                <span class="footnote_anchor"><a href="footnotes.html#ftn-fn21_05" id="fn21_05">[ 232 ]</a></span> The initially signed exponent is also not stored directly, but as a 
                <span class="italic">biased exponent</span>
                <a class="indexanchor" id="i21_49"/>
                <a class="indexanchor" id="i21_50"/> in an IEEE-encoded representation. Depending on the accuracy, +127 (for 
                <samp class="listingcharacter listingcharacter">float</samp>) and +1,023 (for 
                <samp class="listingcharacter listingcharacter">double</samp>) gets added to the exponent. After the calculation, an integer always exists in the representation. The values 127 and 1,023 are referred to as 
                <span class="italic">bias</span>
                <a class="indexanchor" id="i21_51"/>
            .</p>
            
            <p class="standard">The sign always costs 1 bit, and the number of bits for exponents and mantissas depends on the data type, as listed in 
                <span class="crossreference "><a href="21_002.html#t21.10">Table 21.10</a></span>
            .</p>
            
            <table class="standardtable" id="t21.10">
                
                <thead>
                    
                    <tr>
                        
                        <th class="tablehead tablecell_first top_border_cell">
                            
                            <p class="standard first-item last-item">Data Type</p>
                        
                        </th>
                        
                        <th class="tablehead tablecell_middle top_border_cell">
                            
                            <p class="standard first-item last-item">Number of Bits <br/>for the Exponent</p>
                        
                        </th>
                        
                        <th class="tablehead tablecell_last top_border_cell">
                            
                            <p class="standard first-item last-item">Number of Bits <br/>for the Mantissa</p>
                        
                        </th>
                    
                    </tr>
                
                </thead>
                
                <tbody>
                    
                    <tr>
                        
                        <td class="tablecell tablecell_first top_border_cell">
                            
                            <p class="standard first-item last-item">
                                <samp class="listingcharacter listingcharacter">float</samp>
                            </p>
                        
                        </td>
                        
                        <td class="tablecell tablecell_middle top_border_cell">
                            
                            <p class="standard first-item last-item">8</p>
                        
                        </td>
                        
                        <td class="tablecell tablecell_last top_border_cell">
                            
                            <p class="standard first-item last-item">23</p>
                        
                        </td>
                    
                    </tr>
                    
                    <tr class="light">
                        
                        <td class="tablecell tablecell_first">
                            
                            <p class="standard first-item last-item">
                                <samp class="listingcharacter listingcharacter">double</samp>
                            </p>
                        
                        </td>
                        
                        <td class="tablecell tablecell_middle">
                            
                            <p class="standard first-item last-item">11</p>
                        
                        </td>
                        
                        <td class="tablecell tablecell_last">
                            
                            <p class="standard first-item last-item">52</p>
                        
                        </td>
                    
                    </tr>
                
                </tbody>
            
            </table>
            
            <p class="caption "><b>Table 21.10</b>    
            Number of Bits for Exponents and Mantissas</p>
            
            <div class="box box_standard">
                
                <h6 class="boxheading"><span class="box_icon">[eg]  </span>Example</h6>
                
                <p class="standard first">The following examples are encodings for the number 123,456.789 as a 
                    <samp class="listingcharacter listingcharacter">float</samp> and as a 
                    <samp class="listingcharacter listingcharacter">double</samp>. The 
                    <samp class="listingcharacter listingcharacter">#</samp>
                 separates sign, exponent, and mantissa:</p>
                
                <div class="listing " id="l_none_21347"><pre><span class="">0</span><span class="">#</span><span class="">10001111</span><span class="">#</span><span class="">11100010010000001100101</span><span class=""><br/></span><span class="">0</span><span class="">#</span><span class="">10000001111</span><span class="">#</span><span class="">111000100100000011001001111110111110011101101100100</span><span class="">1</span></pre></div>
                
                <p class="standard">To get from this representation to the number, you can write the following:</p>
                
                <div class="listing " id="l_none_21356"><pre>BigInteger biasedExponent <span class="">=</span><span class=""> </span><span class="">new</span><span class=""> </span><span class="">BigInteger</span><span class="">(</span><span class=""> </span><span class="">"10001111"</span><span class="">,</span><span class=""> </span><span class="">2</span><span class=""> </span><span class="">);</span><span class=""><br/></span>BigInteger mantissa <span class="">=</span><span class=""> </span><span class="">new</span><span class=""> </span><span class="">BigInteger</span><span class="">(</span><span class=""> </span><span class="">"11100010010000001100101"</span><span class="">,</span><span class=""> </span><span class="">2</span><span class=""> </span><span class="">);</span><span class=""><br/></span><span class="">int</span><span class=""> exponent </span><span class="">=</span><span class=""> </span><span class="">(</span><span class="">int</span><span class="">)</span><span class=""> Math</span><span class="">.</span><span class="">pow</span><span class="">(</span><span class=""> </span><span class="">2</span><span class="">,</span><span class=""> biasedExponent</span><span class="">.</span><span class="">longValue</span><span class="">()</span><span class=""> </span><span class="">-</span><span class=""> </span><span class="">127</span><span class=""> </span><span class="">);</span><span class=""><br/></span><span class="">double</span><span class=""> m </span><span class="">=</span><span class=""> </span><span class="">1</span><span class="">.</span><span class=""> </span><span class="">+</span><span class=""> </span><span class="">(</span><span class="">mantissa</span><span class="">.</span><span class="">longValue</span><span class="">()</span><span class=""> / Math</span><span class="">.</span><span class="">pow</span><span class="">(</span><span class=""> </span><span class="">2</span><span class="">,</span><span class=""> </span><span class="">23</span><span class=""> </span><span class="">));</span><br/>System.out.<span class="">println</span><span class="">( exponent * m );  </span><span class="">// 123456.7890625</span><span class=""> </span><span class=""/></pre></div>
                
                <p class="standard last">The exponent (without bias) of a float is returned by 
                    <samp class="listingcharacter listingcharacter">Math.getExponent(...)</samp>
                ; thus, applied to our number, the result is 16.</p>
            
            </div>
            
            <p class="standard">Access to the bit pattern is provided by the methods
                <a class="indexanchor" id="i21_52"/>
                <samp class="listingcharacter listingcharacter"> long doubleToLongBits(double)</samp> and 
                <samp class="listingcharacter listingcharacter">int Float.floatToIntBits(float)</samp>. The reverse methods are 
                <samp class="listingcharacter listingcharacter">double Double.longBitsToDouble(long)</samp>
                <a class="indexanchor" id="i21_53"/> or 
                <samp class="listingcharacter listingcharacter">float Float.intBitsToFloat(int)</samp>
            .</p>
            
            <div class="box box_standard">
                
                <h6 class="boxheading"><span class="box_icon">[eg]  </span>
                    <a id="p1031"/>
                Example</h6>
                
                <p class="standard first">Print an alternative representation of 
                    <samp class="listingcharacter listingcharacter">double</samp> and 
                    <samp class="listingcharacter listingcharacter">float</samp>
                 floating point numbers:</p>
                
                <div class="listing  last_item" id="l_none_21363"><pre><span class="">double</span><span class=""> x </span><span class="">=</span><span class=""> </span><span class="">123456.789</span><span class="">;</span><span class=""><br/></span><span class="">float</span><span class="">  y </span><span class="">=</span><span class=""> </span><span class="">123456.789f</span><span class="">;</span><span class=""><br/></span>out<span class="">.</span><span class="">printf</span><span class="">(</span><span class=""> </span><span class="">"%016x%n"</span><span class="">,</span><span class=""> </span>
                    <span class="bold"><span class="">Double.</span><span class="">doubleToLongBits</span><span class="">( x )</span></span> );<span class=""> // 40fe240c9fbe76c9</span><span class=""><br/></span>out.<span class="">printf</span><span class="">( </span><span class="">"%08x%n"</span><span class="">, </span>
                    <span class="bold">Float.<span class="">floatToIntBits</span><span class="">( y )</span></span> );    <span class=""> // 47f12065</span><span class=""><br/></span>out.<span class="">println</span><span class="">( Long.</span><span class="">toBinaryString</span><span class="">( </span>
                    <span class="bold">Double.<span class="">doubleToLongBits</span><span class="">( x )</span></span> ) );<br/>out.<span class="">println</span><span class="">( Integer.</span><span class="">toBinaryString</span><span class="">( </span>
                    <span class="bold">Float.<span class="">floatToIntBits</span><span class="">( y )</span></span> ) );<span class=""/></pre></div>
            
            </div>
            
            <div class="box box_standard">
                
                <h6 class="boxheading"><span class="box_icon">[»]  </span>Note</h6>
                
                <p class="standard first last">Since floats can only be represented as approximations for periodic binary fractions, the result is often not “precise.” Thus, 
                    <samp class="listingcharacter listingcharacter">0.1</samp>
                 corresponds to a periodic mantissa in IEEE format.</p>
            
            </div>
        
        
    
    </div><p class="signatur"/>
                    </body>
                </html>